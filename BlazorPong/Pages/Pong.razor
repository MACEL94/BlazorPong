@page "/pong"
@using Microsoft.AspNetCore.SignalR.Client

@code {
    HubConnection _connection;
    // Per non lasciare cliccare nulla fino a che non esiste una connessione reale
    bool clickOnPageDisabled = true;

    protected override async Task OnInitAsync()
    {
        // 44364 DEVELOPMENT(IIS)
        // 443 PROD o DEV BlazorPong
#if DEBUG
        _connection = new HubConnectionBuilder()
            .WithUrl("https://localhost/gamehub")
            .Build();
#else
    _connection = new HubConnectionBuilder()
        .WithUrl("https://blazorpong-dev-as.azurewebsites.net/gamehub")
        .Build();
#endif

        _connection.On<GameObject>("UpdateGameObjectPositionOnClient", this.UpdateGameObjectPositionOnClient);
        await _connection.StartAsync();
        clickOnPageDisabled = false;
    }

    private Task UpdateGameObjectPositionOnClient(GameObject updatedObj)
    {
        throw new NotImplementedException();
    }
}